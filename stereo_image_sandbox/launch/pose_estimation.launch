<launch>

  <arg name="camera_name" value="stereo" />
  <arg name="gui" default="true" />

  <group ns="$(arg camera_name)">
    <group ns="left_camera" >
      <node name="people_pose_estimation"
            pkg="stereo_image_sandbox" type="pose_estimation.py"
            clear_params="true"
            output="screen" >
        <remap from="~input" to="image_rect_color" />
        <rosparam subst_value="true" >
          model_path: $(find stereo_image_sandbox)/trained_data/posenet_mobilenet_v1_100_257x257_multi_kpt_stripped.tflite
        </rosparam>
      </node>
    </group>

    <group ns="right_camera" >
      <node name="people_pose_estimation"
            pkg="stereo_image_sandbox" type="pose_estimation.py"
            clear_params="true"
            output="screen" >
        <remap from="~input" to="image_rect_color" />
        <rosparam subst_value="true" >
          model_path: $(find stereo_image_sandbox)/trained_data/posenet_mobilenet_v1_100_257x257_multi_kpt_stripped.tflite
        </rosparam>
      </node>
    </group>
  </group>

  <group if="$(arg gui)" >
    <group ns="$(arg camera_name)" >
      <group ns="left_camera" >
        <node name="image_view"
              pkg="image_view" type="image_view"
              args="image:=people_pose_estimation/output/viz" />
      </group>
      <group ns="right_camera" >
        <node name="image_view"
              pkg="image_view" type="image_view"
              args="image:=people_pose_estimation/output/viz" />
      </group>
    </group>
  </group>

</launch>
